<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>

  <body>
    <script>
      /*
       写一个函数，实现以下功能
       输入'1,2,3,5,7,8,10'
       返回 '1~3,5,7~8,10'
      */
      let str = '1,2,3,5,7,8,10'

      function change(str) {
        let arr = str.split(','),
          content = [],
          lsArr = []
        arr.forEach(element => {
          if (lsArr.length > 0) {
            if (element - lsArr.slice(-1) == 1) {
              lsArr.push(element)
            } else {
              //  判断lsArr是否为一个值
              if (lsArr.length > 1) {
                content.push(lsArr.shift() + '~' + lsArr.pop())
              } else {
                content.push(lsArr[0])
              }
              lsArr = [element]
            }
          } else {
            lsArr.push(element)
          }
        })
        //  循环结束
        if (lsArr.length > 1) {
          content.push(lsArr.shift() + '~' + lsArr.pop())
        } else {
          content.push(lsArr[0])
        }
        return content.join(',')
      }
      let res = change(str)
      console.log(res) //1~3,5,7~8,10
    </script>
  </body>
</html>
